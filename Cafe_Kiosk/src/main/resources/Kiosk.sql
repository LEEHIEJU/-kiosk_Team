-- ORDERCODE 시퀀스 작성
CREATE SEQUENCE ordercodeseq;

-- ORDERCODE 테이블 작성
CREATE TABLE ORDERCODE(
ORDERNUM NUMBER PRIMARY KEY,
ORDERWHERE VARCHAR2(45) NOT NULL,
ORDERIN VARCHAR2(45),
ORDERDATE DATE,
COUPON VARCHAR2(45)
);

-- 컬럼 추가
ALTER TABLE ORDERNUM ADD ORDERSTATE varchar2(45);

-- 컬럼 삭제
ALTER TABLE ORDERCODE DROP COLUMN coupon;

-- FK설정(ORDERNUM -> ORDERCODE)
ALTER TABLE ORDERNUM  
ADD CONSTRAINT ORDERNUM FOREIGN KEY(ORDERNUM) REFERENCES ORDERCODE(ORDERNUM);

-- ORDERCODE 테이블 확인
SELECT * FROM ORDERCODE;

-- ORDERCODE 테이블 값 넣기
INSERT INTO ORDERCODE VALUES ('1','매장','Y','23.02.14','Y');
INSERT INTO ORDERCODE VALUES ('2','포장','Y','23.02.17','Y');

DELETE FROM ORDERCODE WHERE ordernum = '1';

-- ORDERNUM 시퀀스 생성
CREATE SEQUENCE ORDERNUMSEQ;

-- ORDERNUM 테이블 생성
CREATE TABLE ORDERNUM(
IDX NUMBER PRIMARY KEY,
FOODSTOCK NUMBER,
ORDERCOUNT NUMBER,
ORDERNUM NUMBER,
FOODNUM VARCHAR2(45)
);

SELECT * FROM ORDERNUM;

DROP TABLE ORDERNUM;

-- ADMIN 시퀀스 생성
CREATE SEQUENCE ADMINPWSEQ;
-- ADMIN 테이블 생성
CREATE TABLE ADMIN(
ADMINPW NUMBER NOT NULL PRIMARY KEY
);

-- MENU 시퀀스 생성
CREATE SEQUENCE MENUSEQ;

SELECT MENUSEQ.NEXTVAL FROM DUAL;

-- MENU 테이블 생성
CREATE TABLE MENU(
FOODNUM VARCHAR2(45) PRIMARY KEY,
FOODNAME VARCHAR2(100) NOT NULL,
FOODTYPE VARCHAR2(45) NOT NULL,
FOODPRICE NUMBER NOT NULL,
FOODSOLDOUT VARCHAR(45),
FOODLEV NUMBER NOT NULL
);

ALTER TABLE menu ADD image varchar(45);

SELECT * FROM MENU ;

ALTER TABLE MENU ADD(FOODLEV NUMBER(10));

-- FK설정(ORDERNUM -> MENU)
ALTER TABLE ORDERNUM
ADD CONSTRAINT FOODNUM FOREIGN KEY(FOODNUM) REFERENCES MENU(FOODNUM);

-- MENU 테이블 확인
SELECT * FROM MENU;

DROP TABLE MENU;

UPDATE MENU SET FOODTYPE = 'DESSERT' WHERE FOODTYPE = 'BREAD';

DELETE FROM MENU WHERE FOODNUM = 'B02';

-- MENU 테이블 값 넣기
INSERT INTO MENU VALUES('A01', '에스프레소', 'COFFEE', 2500, 'N', 1);
INSERT INTO MENU VALUES('A02', '아메리카노', 'COFFEE', 3000, 'N', 1);
INSERT INTO MENU VALUES('A03', '카페라떼', 'COFFEE', 3500, 'N', 1);
INSERT INTO MENU VALUES('A04', '카페모카', 'COFFEE', 3500, 'N', 1);
INSERT INTO MENU VALUES('A05', '카라멜마끼야또', 'COFFEE', 4000, 'N', 1);
INSERT INTO MENU VALUES('A06', '바닐라라떼', 'COFFEE', 4000, 'N', 1);
INSERT INTO MENU VALUES('A07', '시그니처라떼', 'COFFEE', 4500, 'N', 1);
INSERT INTO MENU VALUES('A08', '흑당라떼', 'COFFEE', 4500, 'N', 1);
INSERT INTO MENU VALUES('A09', '콜드브루', 'COFFEE', 4500, 'N', 1);
INSERT INTO MENU VALUES('A10', '콜드브루연유라떼', 'COFFEE', 5000, 'N', 1);
INSERT INTO MENU VALUES('B01', '아이스티', 'TEA', 3000, 'N', 2);
INSERT INTO MENU VALUES('B02', '레몬에이드', 'ADE', 3500, 'N', 2);
INSERT INTO MENU VALUES('B03', '자몽에이드', 'ADE', 3500, 'N', 2);
INSERT INTO MENU VALUES('B04', '요거트스무디', 'SMOOTHIE', 5000, 'N', 2);
INSERT INTO MENU VALUES('B05', '딸기스무디', 'SMOOTHIE', 5000, 'N', 2);
INSERT INTO MENU VALUES('B06', '말차스무디', 'SMOOTHIE', 5000, 'N', 2);
INSERT INTO MENU VALUES('B07', '초코스무디', 'SMOOTHIE', 5000, 'N', 2);
INSERT INTO MENU VALUES('B08', '망고주스', 'JUICE', 5000, 'N', 2);
INSERT INTO MENU VALUES('B09', '키위주스', 'JUICE', 5000, 'N', 2);
INSERT INTO MENU VALUES('B10', '딸기주스', 'JUICE', 5000, 'N', 2);
INSERT INTO MENU VALUES('C01', '크로플', 'BREAD', 3500, 'N', 3);
INSERT INTO MENU VALUES('C02', '마카롱', 'BREAD', 2000, 'N', 3);
INSERT INTO MENU VALUES('C03', '허니브레드', 'BREAD', 5000, 'N', 3);
INSERT INTO MENU VALUES('C04', '오레오치즈케이크', 'BREAD', 5000, 'N', 3);
INSERT INTO MENU VALUES('C05', '치즈케이크', 'BREAD', 5000, 'N', 3);

DELETE FROM menu WHERE foodnum = 'C07';

SELECT * FROM menu;
-- DRINKSIZE 시퀀스 생성
CREATE SEQUENCE DRINKSIZESEQ;

-- DRINKSIZE 테이블 생성
CREATE TABLE DRINKSIZE(
FOODNUM VARCHAR2(45),
DRINKSIZETYPE VARCHAR2(45),
PLUSPRICE INT
);

DROP TABLE DRINKSIZE;

DELETE FROM DRINKSIZE d WHERE FODDNUM = 'A04';

SELECT * FROM DRINKSIZE;

INSERT INTO DRINKSIZE VALUES('A01', 'HOT', 0);
INSERT INTO DRINKSIZE VALUES('A01', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('A01', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('A01', 'LARGE', 0);
INSERT INTO DRINKSIZE VALUES('A02', 'HOT', 0);
INSERT INTO DRINKSIZE VALUES('A02', 'ICE', 500);
INSERT INTO DRINKSIZE VALUES('A02', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('A02', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('A03', 'HOT', 0);
INSERT INTO DRINKSIZE VALUES('A03', 'ICE', 500);
INSERT INTO DRINKSIZE VALUES('A03', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('A03', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('A04', 'HOT', 0);
INSERT INTO DRINKSIZE VALUES('A04', 'ICE', 500);
INSERT INTO DRINKSIZE VALUES('A04', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('A04', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('A05', 'HOT', 0);
INSERT INTO DRINKSIZE VALUES('A05', 'ICE', 500);
INSERT INTO DRINKSIZE VALUES('A05', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('A05', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('A06', 'HOT', 0);
INSERT INTO DRINKSIZE VALUES('A06', 'ICE', 500);
INSERT INTO DRINKSIZE VALUES('A06', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('A06', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('A07', 'HOT', 0);
INSERT INTO DRINKSIZE VALUES('A07', 'ICE', 500);
INSERT INTO DRINKSIZE VALUES('A07', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('A07', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('A08', 'HOT', 0);
INSERT INTO DRINKSIZE VALUES('A08', 'ICE', 500);
INSERT INTO DRINKSIZE VALUES('A08', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('A08', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('A09', 'HOT', 0);
INSERT INTO DRINKSIZE VALUES('A09', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('A09', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('A09', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('A10', 'HOT', 0);
INSERT INTO DRINKSIZE VALUES('A10', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('A10', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('A10', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('B01', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('B01', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('B01', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('B02', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('B02', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('B02', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('B03', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('B03', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('B03', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('B04', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('B04', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('B04', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('B05', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('B05', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('B05', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('B06', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('B06', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('B06', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('B07', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('B07', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('B07', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('B08', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('B08', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('B08', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('B09', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('B09', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('B09', 'LARGE', 1000);
INSERT INTO DRINKSIZE VALUES('B10', 'ICE', 0);
INSERT INTO DRINKSIZE VALUES('B10', 'SMALL', 0);
INSERT INTO DRINKSIZE VALUES('B10', 'LARGE', 1000);

-- FK설정(DRINKSIZE -> MENU)
ALTER TABLE DRINKSIZE
ADD CONSTRAINT FK_FOODNUM FOREIGN KEY(FOODNUM) REFERENCES MENU(FOODNUM);

-- PK설정
ALTER TABLE DRINKSIZE
ADD CONSTRAINT PK_FOODNUM PRIMARY KEY (FOODNUM,DRINKSIZETYPE);

-- 한가지 메뉴 조회
SELECT m.*, d.DRINKSIZETYPE FROM DRINKSIZE d, MENU m
WHERE M.FOODNUM = d.FOODNUM AND M.FOODNUM ='A02';

SELECT *
FROM MENU m , DRINKSIZE d
WHERE M.FOODNUM = D.FOODNUM 
ORDER BY FOODNUM;

SELECT * FROM DRINKSIZE d WHERE foodnum='A02';


